!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CKEditor5=t():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.ucsfcalloutbox=t())}(self,(()=>(()=>{var e={"ckeditor5/src/core.js":(e,t,l)=>{e.exports=l("dll-reference CKEditor5.dll")("./src/core.js")},"ckeditor5/src/ui.js":(e,t,l)=>{e.exports=l("dll-reference CKEditor5.dll")("./src/ui.js")},"ckeditor5/src/widget.js":(e,t,l)=>{e.exports=l("dll-reference CKEditor5.dll")("./src/widget.js")},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},t={};function l(o){var a=t[o];if(void 0!==a)return a.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,l),i.exports}l.d=(e,t)=>{for(var o in t)l.o(t,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var o={};return(()=>{"use strict";l.d(o,{default:()=>d});var e=l("ckeditor5/src/core.js");class t extends e.Command{execute(e){const t=this.editor.model,l=function(e){const t=e.getSelectedElement();if(t&&t.is("element","ucsfcalloutbox"))return t;return null}(t.document.selection);t.change((o=>{l?(o.setAttribute("data-align",e.align,l),o.setAttribute("data-image",e.image,l)):t.insertContent(function(e,t){const l=e.createElement("ucsfcalloutbox");e.setAttribute("data-align",t.align,l),e.setAttribute("data-image",t.image,l);const o=e.createElement("calloutBoxImage"),a=e.createElement("calloutBoxContent"),i=e.createElement("calloutBoxEyebrowTitle"),n=e.createElement("calloutBoxTime"),r=e.createElement("calloutBoxParagraph"),s=e.createElement("calloutBoxParagraph"),c=e.createElement("calloutBoxLink");return e.insertText("Remove this text and use the embed button to add an image.",o),e.append(o,l),e.insertText("Take Action",i),e.append(i,a),e.insertText("Oct. 24, 2020",n),e.append(n,a),e.insertText("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum ultricies sit amet.",r),e.append(r,a),e.insertText("Learn More",c),e.setAttribute("href","/",c),e.append(c,s),e.append(s,a),e.append(a,l),l}(o,e))}))}refresh(){const e=this.editor.model,t=e.document.selection,l=(e.schema.checkChild(t.focus.parent,"ucsfcalloutbox"),e.schema.findAllowedParent(t.getFirstPosition(),"ucsfcalloutbox"));this.isEnabled=null!==l}}var a=l("ckeditor5/src/widget.js");class i extends e.Plugin{static get pluginName(){return"UcsfCalloutboxEditing"}static get requires(){return[a.Widget]}init(){this._defineSchema(),this._defineConverters(),this.editor.commands.add("insertCalloutBox",new t(this.editor))}_defineSchema(){const e=this.editor.model.schema;e.register("ucsfcalloutbox",{isObject:!0,allowWhere:"$block",allowAttributes:["data-image","data-align","class"]}),e.register("calloutBoxImage",{isLimit:!0,allowIn:"ucsfcalloutbox",allowContentOf:"$block"}),e.register("calloutBoxContent",{isLimit:!0,allowIn:"ucsfcalloutbox",allowContentOf:"$block"}),e.register("calloutBoxEyebrowTitle",{allowIn:"calloutBoxContent",allowContentOf:"$block"}),e.register("calloutBoxTime",{allowIn:"calloutBoxContent",allowContentOf:"$block"}),e.register("calloutBoxParagraph",{allowIn:"calloutBoxContent",allowContentOf:"$block"}),e.register("calloutBoxLink",{allowIn:"calloutBoxContent",allowContentOf:"$block"})}_defineConverters(){const e=this.editor.conversion;e.attributeToAttribute({model:{name:"ucsfcalloutbox",key:"data-align",values:["right","left"]},view:{left:{key:"class",value:"callout-left"},right:{key:"class",value:"callout-right"}}}),e.attributeToAttribute({model:{name:"ucsfcalloutbox",key:"data-image"},view:{key:"data-image"}}),e.for("upcast").elementToElement({view:{name:"aside",classes:"ucsfcallout"},model:(e,{writer:t})=>{const l=e.getAttribute("data-align"),o=e.getAttribute("data-image");return t.createElement("ucsfcalloutbox",{"data-image":o,"data-align":l})}}),e.for("dataDowncast").elementToElement({model:"ucsfcalloutbox",view:(e,{writer:t})=>{let l={class:"ucsfcallout","data-image":"0"};const o=e.getAttribute("data-align")||"left",i=e.getAttribute("data-image")||"0";l.class=l.class+" callout-"+o,l["data-image"]=i,l["data-align"]=o;const n=t.createContainerElement("aside",l);return(0,a.toWidget)(n,t)}}),e.for("editingDowncast").elementToElement({model:"ucsfcalloutbox",view:(e,{writer:t})=>{let l={class:"ucsfcallout","data-image":"0"};const o=e.getAttribute("data-align")||"left",i=e.getAttribute("data-image")||"0";l.class=l.class+" callout-"+o,l["data-image"]=i,l["data-align"]=o;const n=t.createContainerElement("aside",l);return(0,a.toWidget)(n,t,{label:"callout box widget"})}}),e.for("upcast").elementToElement({view:{name:"div",classes:"callout__image"},model:"calloutBoxImage"}),e.for("dataDowncast").elementToElement({model:"calloutBoxImage",view:{name:"div",classes:"callout__image"}}),e.for("editingDowncast").elementToElement({model:"calloutBoxImage",view:(e,{writer:t})=>{const l=t.createEditableElement("div",{class:"callout__image"});return(0,a.toWidgetEditable)(l,t)}}),e.for("upcast").elementToElement({model:"calloutBoxContent",view:{name:"div",classes:"callout__content"}}),e.for("dataDowncast").elementToElement({model:"calloutBoxContent",view:{name:"div",classes:"callout__content"}}),e.for("editingDowncast").elementToElement({model:"calloutBoxContent",view:(e,{writer:t})=>{const l=t.createEditableElement("div",{class:"callout__content"});return(0,a.toWidgetEditable)(l,t)}}),e.for("upcast").elementToElement({model:"calloutBoxEyebrowTitle",view:{name:"h3",classes:"eyebrow-title"}}),e.for("dataDowncast").elementToElement({model:"calloutBoxEyebrowTitle",view:{name:"h3",classes:"eyebrow-title"}}),e.for("editingDowncast").elementToElement({model:"calloutBoxEyebrowTitle",view:(e,{writer:t})=>{const l=t.createEditableElement("h3",{class:"eyebrow-title"});return(0,a.toWidgetEditable)(l,t)}}),e.for("upcast").elementToElement({model:"calloutBoxTime",view:{name:"time"}}),e.for("dataDowncast").elementToElement({model:"calloutBoxTime",view:{name:"time"}}),e.for("editingDowncast").elementToElement({model:"calloutBoxTime",view:(e,{writer:t})=>{const l=t.createEditableElement("time");return(0,a.toWidgetEditable)(l,t)}}),e.for("upcast").elementToElement({model:"calloutBoxParagraph",view:{name:"p"}}),e.for("dataDowncast").elementToElement({model:"calloutBoxParagraph",view:{name:"p"}}),e.for("editingDowncast").elementToElement({model:"calloutBoxParagraph",view:(e,{writer:t})=>{const l=t.createEditableElement("p");return(0,a.toWidgetEditable)(l,t)}}),e.for("upcast").elementToElement({model:"calloutBoxLink",view:{name:"a",classes:"link link--cta"}}),e.for("dataDowncast").elementToElement({model:"calloutBoxLink",view:{name:"a",classes:"link link--cta"}}),e.for("editingDowncast").elementToElement({model:"calloutBoxLink",view:(e,{writer:t})=>{const l=t.createEditableElement("a",{class:"link link--cta"});return(0,a.toWidgetEditable)(l,t)}})}}var n=l("ckeditor5/src/ui.js");class r extends n.View{constructor(t){super(t.locale);const l=t.model.document.selection.getSelectedElement();let o="left",a="0";l&&"ucsfcalloutbox"==l.name&&(o=l.getAttribute("data-align"),a=l.getAttribute("data-image")),this.selectLabel=new n.Template({tag:"label",attributes:{for:"select-dropdown"},children:["Align Option:"]}),this.select=new n.Template({tag:"select",attributes:{id:"align-dropdown",class:"ck-balloon-panel__select"},children:[new n.Template({tag:"option",attributes:{value:"left",selected:!(!o||"right"==o)},children:["Align Left"]}),new n.Template({tag:"option",attributes:{value:"right",selected:!(!o||"right"!=o)},children:["Align Right"]})]}),this.radioLabel=new n.Template({tag:"label",attributes:{for:"corner-on"},children:["Corner Image: On"]}),this.radioInputOn=new n.Template({tag:"input",attributes:{type:"radio",name:"corner",value:"1",id:"corner-on",checked:!(!a||"1"!=a)}}),this.radioLabelOff=new n.Template({tag:"label",attributes:{for:"corner-off"},children:["Corner Image: Off"]}),this.radioInputOff=new n.Template({tag:"input",attributes:{type:"radio",name:"corner",value:"0",id:"corner-off",checked:!(!a||"1"==a)}}),this.saveButtonView=this._createButton("Save",e.icons.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton("Cancel",e.icons.cancel,"ck-button-cancel"),this.cancelButtonView.delegate("execute").to(this,"cancel"),this.setTemplate({tag:"form",attributes:{class:["ck","ck-ucsfcalloutbox-form","ck-reset_all-excluded"],tabindex:"-1"},children:[this.selectLabel,this.select,this.radioLabel,this.radioInputOn,this.radioLabelOff,this.radioInputOff,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),(0,n.submitHandler)({view:this})}_createInput(e){const t=new n.LabeledFieldView(this.locale,n.createLabeledInputText);return t.label=e,t}_createButton(e,t,l){const o=new n.ButtonView;return o.set({label:e,icon:t,tooltip:!0,class:l}),o}}class s extends e.Plugin{static get requires(){return[n.ContextualBalloon]}init(){const e=this.editor;this._balloon=this.editor.plugins.get(n.ContextualBalloon);const t=this.editor.editing.view.document;this.listenTo(t,"click",(()=>{this._getSelectedElement()&&(this.formView=this._createFormView(),this._showUI())})),e.ui.componentFactory.add("ucsfCalloutbox",(t=>{const l=e.commands.get("insertCalloutBox"),o=new n.ButtonView(t);return o.set({label:"UcsfCalloutbox",withText:!0,tooltip:!0}),o.bind("isOn","isEnabled").to(l,"value","isEnabled"),this.listenTo(o,"execute",(()=>{this.formView=this._createFormView(),this._showUI()})),o}))}_createFormView(){const e=this.editor,t=new r(e);return this.listenTo(t,"submit",(()=>{const l={align:t.element.querySelector("#align-dropdown").value,image:t.element.querySelector('input[name="corner"]:checked').value};e.execute("insertCalloutBox",l),this._hideUI()})),this.listenTo(t,"cancel",(()=>{this._hideUI()})),(0,n.clickOutsideHandler)({emitter:t,activator:()=>this._balloon.visibleView===t,contextElements:[this._balloon.view.element],callback:()=>this._hideUI()}),t}_showUI(){this._balloon.add({view:this.formView,position:this._getBalloonPositionData()})}_hideUI(){this._balloon.remove(this.formView),this.editor.editing.view.focus()}_getSelectedElement(){const e=this.editor.model.document.selection.getSelectedElement();return!(!e||"ucsfcalloutbox"!=e.name)&&e}_getBalloonPositionData(){const e=this.editor.editing.view,t=e.document;let l=null;return l=()=>e.domConverter.viewRangeToDom(t.selection.getFirstRange()),{target:l}}}class c extends e.Plugin{static get requires(){return[i,s]}}const d={UcsfCalloutbox:c}})(),o=o.default})()));