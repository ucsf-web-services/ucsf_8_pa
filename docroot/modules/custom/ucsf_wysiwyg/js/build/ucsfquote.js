!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CKEditor5=t():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.ucsfquote=t())}(self,(()=>(()=>{var e={"ckeditor5/src/core.js":(e,t,l)=>{e.exports=l("dll-reference CKEditor5.dll")("./src/core.js")},"ckeditor5/src/ui.js":(e,t,l)=>{e.exports=l("dll-reference CKEditor5.dll")("./src/ui.js")},"ckeditor5/src/widget.js":(e,t,l)=>{e.exports=l("dll-reference CKEditor5.dll")("./src/widget.js")},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},t={};function l(o){var c=t[o];if(void 0!==c)return c.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,l),n.exports}l.d=(e,t)=>{for(var o in t)l.o(t,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var o={};return(()=>{"use strict";l.d(o,{default:()=>u});var e=l("ckeditor5/src/core.js");class t extends e.Command{execute(e){const t=this.editor.model,l=function(e){const t=e.getSelectedElement();if(t&&t.is("element","ucsfquote"))return t;return null}(t.document.selection);t.change((o=>{l?(o.removeAttribute("colorAccent",l),o.removeAttribute("align",l),o.setAttribute("align",e.align,l),o.setAttribute("colorAccent",e.colorAccent,l)):t.insertContent(function(e,t){const l=e.createElement("ucsfquote");e.setAttribute("align",t.align,l),e.setAttribute("colorAccent",t.colorAccent,l);const o=e.createElement("ucsfQuoteContent"),c=e.createElement("ucsfQuoteCite");return e.insertText("Lorem ipsum dolor sit amet, ex labore vivendo laboramus has, vel at putant legendos. Quod appareat id eos, noster malorum et mea.",o),e.append(o,l),e.insertText("Vivendo Laboramus, PhD",c),e.append(c,l),l}(o,e))}))}refresh(){const e=this.editor.model,t=e.document.selection,l=(e.schema.checkChild(t.focus.parent,"ucsfquote"),e.schema.findAllowedParent(t.getFirstPosition(),"ucsfquote"));this.isEnabled=null!==l}}var c=l("ckeditor5/src/widget.js");class n extends e.Plugin{static get pluginName(){return"UcsfQuoteEditing"}static get requires(){return[c.Widget]}init(){this._defineSchema(),this._defineConverters(),this.editor.commands.add("insertUcsfQuote",new t(this.editor))}_defineSchema(){const e=this.editor.model.schema;e.register("ucsfquote",{isObject:!0,allowWhere:"$block",allowAttributes:["colorAccent","align","class"]}),e.register("ucsfQuoteContent",{isLimit:!0,allowIn:"ucsfquote",allowContentOf:"$block"}),e.register("ucsfQuoteCite",{allowIn:"ucsfquote",allowContentOf:"$block"})}_defineConverters(){const e=this.editor.conversion;e.attributeToAttribute({model:{name:"ucsfquote",key:"align",values:["half-left","half-right","full-right"]},view:{"half-left":{key:"class",value:"blockquote--half-left"},"half-right":{key:"class",value:"blockquote--half-right"},"full-right":{key:"class",value:"blockquote--full-right"}}}),e.attributeToAttribute({model:{name:"ucsfquote",key:"colorAccent",values:["blue","light-blue","teal","cool-green","warm-green","purple","violet","magenta","gray","navy","yellow","dark-gray"]},view:{blue:{key:"class",value:"blockquote--color-blue"},"light-blue":{key:"class",value:"blockquote--color-light-blue"},teal:{key:"class",value:"blockquote--color-teal"},"cool-green":{key:"class",value:"blockquote--color-teal"},"warm-green":{key:"class",value:"blockquote--color-warm-green"},purple:{key:"class",value:"blockquote--color-purple"},violet:{key:"class",value:"blockquote--color-violet"},magenta:{key:"class",value:"blockquote--color-magenta"},gray:{key:"class",value:"blockquote--color-gray"},navy:{key:"class",value:"blockquote--color-navy"},yellow:{key:"class",value:"blockquote--color-yellow"},"dark-gray":{key:"class",value:"blockquote--color-dark-gray"}}}),e.for("upcast").elementToElement({view:{name:"blockquote",classes:"blockquote"},model:(e,{writer:t})=>{const l=e.getClassNames(),o=l.find((e=>"blockquote"!==e&&!e.startsWith("blockquote--color-"))),c=l.find((e=>e.startsWith("blockquote--color-")));return t.createElement("ucsfquote",{colorAccent:c.replace("blockquote--color-",""),align:o.replace("blockquote--","")})}}),e.for("dataDowncast").elementToElement({model:"ucsfquote",view:(e,{writer:t})=>{let l={class:"blockquote"};const o=e.getAttribute("align");l.class=l.class+" blockquote--"+o;const n=e.getAttribute("colorAccent");l.class=l.class+" blockquote--color-"+n;const s=t.createContainerElement("blockquote",l);return(0,c.toWidget)(s,t)}}),e.for("editingDowncast").elementToElement({model:"ucsfquote",view:(e,{writer:t})=>{let l={class:"blockquote"};const o=e.getAttribute("align");l.class=l.class+" blockquote--"+o;const n=e.getAttribute("colorAccent");l.class=l.class+" blockquote--color-"+n;const s=t.createContainerElement("blockquote",l);return(0,c.toWidget)(s,t,{label:"callout box widget"})}}),e.for("upcast").elementToElement({model:"ucsfQuoteContent",view:{name:"p",classes:"blockquote-content__text"}}),e.for("dataDowncast").elementToElement({model:"ucsfQuoteContent",view:{name:"p",classes:"blockquote-content__text"}}),e.for("editingDowncast").elementToElement({model:"ucsfQuoteContent",view:(e,{writer:t})=>{const l=t.createEditableElement("p",{class:"blockquote-content__text"});return(0,c.toWidgetEditable)(l,t)}}),e.for("upcast").elementToElement({model:"ucsfQuoteCite",view:{name:"p",classes:"blockquote-content__cite"}}),e.for("dataDowncast").elementToElement({model:"ucsfQuoteCite",view:{name:"p",classes:"blockquote-content__cite"}}),e.for("editingDowncast").elementToElement({model:"ucsfQuoteCite",view:(e,{writer:t})=>{const l=t.createEditableElement("p",{class:"blockquote-content__cite"});return(0,c.toWidgetEditable)(l,t)}})}}var s=l("ckeditor5/src/ui.js");class i extends s.View{constructor(t){super(t.locale);const l=t.model.document.selection.getSelectedElement(),o=this.bindTemplate;let c="half-left",n="blue";l&&"ucsfquote"==l.name&&(c=l.getAttribute("align"),n=l.getAttribute("colorAccent")),this.selectLabel=new s.Template({tag:"label",attributes:{for:"align-dropdown"},children:["Align Option:"]}),this.select=new s.Template({tag:"select",attributes:{id:"align-dropdown",class:"ck-balloon-panel__select"},on:{change:o.to((e=>{"full-right"===e.target.value&&(this.element.querySelector("#color-label").className=this.element.querySelector("#color-label").className.replace("hidden",""),this.element.querySelector("#color-dropdown").className=this.element.querySelector("#color-dropdown").className.replace("hidden",""))}))},children:[new s.Template({tag:"option",attributes:{value:"half-left",selected:!(!c||"half-left"!=c)},children:["Align Left"]}),new s.Template({tag:"option",attributes:{value:"half-right",selected:!(!c||"half-right"!=c)},children:["Align Right"]}),new s.Template({tag:"option",attributes:{value:"full-right",selected:!(!c||"full-right"!=c)},children:["Align Right Full-Width"]})]}),this.colorLabel=new s.Template({tag:"label",attributes:{id:"color-label",for:"color-dropdown",class:"full-right"==c?"":"hidden"},children:["color Option:"]}),this.color=new s.Template({tag:"select",attributes:{id:"color-dropdown",class:"full-right"==c?"ck-balloon-panel__select":"ck-balloon-panel__select hidden"},children:[new s.Template({tag:"option",attributes:{value:"blue",selected:!(!n||"blue"!=n)},children:["Blue"]}),new s.Template({tag:"option",attributes:{value:"light-blue",selected:!(!n||"light-blue"!=n)},children:["Light Blue"]}),new s.Template({tag:"option",attributes:{value:"teal",selected:!(!n||"teal"!=n)},children:["Teal"]}),new s.Template({tag:"option",attributes:{value:"cool-green",selected:!(!n||"cool-green"!=n)},children:["Cool Green"]}),new s.Template({tag:"option",attributes:{value:"warm-green",selected:!(!n||"warm-green"!=n)},children:["Warm Green"]}),new s.Template({tag:"option",attributes:{value:"purple",selected:!(!n||"purple"!=n)},children:["Purple"]}),new s.Template({tag:"option",attributes:{value:"violet",selected:!(!n||"violet"!=n)},children:["Violet"]}),new s.Template({tag:"option",attributes:{value:"magenta",selected:!(!n||"magenta"!=n)},children:["Magenta"]}),new s.Template({tag:"option",attributes:{value:"gray",selected:!(!n||"gray"!=n)},children:["Cool Gray"]}),new s.Template({tag:"option",attributes:{value:"navy",selected:!(!n||"navy"!=n)},children:["Navy"]}),new s.Template({tag:"option",attributes:{value:"yellow",selected:!(!n||"yellow"!=n)},children:["Yellow"]}),new s.Template({tag:"option",attributes:{value:"dark-gray",selected:!(!n||"dark-gray"!=n)},children:["Dark Gray"]})]}),this.saveButtonView=this._createButton("Save",e.icons.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton("Cancel",e.icons.cancel,"ck-button-cancel"),this.cancelButtonView.delegate("execute").to(this,"cancel"),this.setTemplate({tag:"form",attributes:{class:["ck","ck-ucsfcalloutbox-form","ck-reset_all-excluded"],tabindex:"-1"},children:[this.selectLabel,this.select,this.colorLabel,this.color,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),(0,s.submitHandler)({view:this})}_createInput(e){const t=new s.LabeledFieldView(this.locale,s.createLabeledInputText);return t.label=e,t}_createButton(e,t,l){const o=new s.ButtonView;return o.set({label:e,icon:t,tooltip:!0,class:l}),o}}class a extends e.Plugin{static get requires(){return[s.ContextualBalloon]}init(){const e=this.editor;this._balloon=this.editor.plugins.get(s.ContextualBalloon);const t=this.editor.editing.view.document;this.listenTo(t,"click",(()=>{this._getSelectedElement()&&(this.formView=this._createFormView(),this._showUI())})),e.ui.componentFactory.add("UcsfQuote",(t=>{const l=e.commands.get("insertUcsfQuote"),o=new s.ButtonView(t);return o.set({label:"UcsfQuote",withText:!0,tooltip:!0}),o.bind("isOn","isEnabled").to(l,"value","isEnabled"),this.listenTo(o,"execute",(()=>{this.formView=this._createFormView(),this._showUI()})),o}))}_createFormView(){const e=this.editor,t=new i(e);return this.listenTo(t,"submit",(()=>{const l={align:t.element.querySelector("#align-dropdown").value,colorAccent:t.element.querySelector("#color-dropdown").value};e.execute("insertUcsfQuote",l),this._hideUI()})),this.listenTo(t,"cancel",(()=>{this._hideUI()})),(0,s.clickOutsideHandler)({emitter:t,activator:()=>this._balloon.visibleView===t,contextElements:[this._balloon.view.element],callback:()=>this._hideUI()}),t}_showUI(){this._balloon.add({view:this.formView,position:this._getBalloonPositionData()})}_hideUI(){this._balloon.remove(this.formView),this.editor.editing.view.focus()}_getSelectedElement(){const e=this.editor.model.document.selection.getSelectedElement();return!(!e||"ucsfquote"!=e.name)&&e}_getBalloonPositionData(){const e=this.editor.editing.view,t=e.document;let l=null;return l=()=>e.domConverter.viewRangeToDom(t.selection.getFirstRange()),{target:l}}}class r extends e.Plugin{static get requires(){return[n,a]}}const u={UcsfQuote:r}})(),o=o.default})()));