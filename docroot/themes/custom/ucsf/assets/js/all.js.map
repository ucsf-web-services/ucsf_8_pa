{"version":3,"sources":["all.js"],"names":["$","Drupal","behaviors","dieToolbardie","attach","context","window","matchMedia","addListener","event","matches","click","slickNav","settings","slicknav","duplicate","prependTo","label","openedSymbol","closedSymbol","on","hasClass","removeClass","addClass","desktopDropdownHeight","once","each","dropdown","resizeMenuPanel","self","height","mainHeight","childMenu","find","totalHeight","childHeight","clientHeight","width","$innerMenu","children","innerMenuHeight","length","console","log","$innerMenuChild","css","resizeTimer","clearTimeout","setTimeout","nolink","preventDefault","$this","siblings","e","stopPropagation","parent","$dropdown","parents","document","activeElement","has","first","searchMenuAction","$searchToggle","$search","toggleClass","focus","body","closest","fixExplorer","version","detectIE","Number","after","fixHeights","resizeCards","intstop","intervals","setInterval","clearInterval","ua","navigator","userAgent","msie","indexOf","parseInt","substring","trident","rv","edge","highestBox","$items","filter","prev","innerHeight","attr","urlParam","name","results","RegExp","exec","location","href","val","decodeURIComponent","mainMenuSearchFilter","$form","submit","option","jQuery"],"mappings":"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","file":"all.js","sourcesContent":["/* eslint-disable */\n(function ($) {\n    'use strict';\n\n    Drupal.behaviors.dieToolbardie = {\n        attach: function (context) {\n            window.matchMedia('(min-width: 975px)').addListener(function (event) {\n                event.matches ? $('#toolbar-item-administration', context).click() : $('.toolbar-item.is-active', context).click();\n            });\n        }\n    };\n\n\n    Drupal.behaviors.slickNav = {\n        attach: function (context, settings) {\n\n            $('#block-ucsf-main-menu').slicknav({\n                duplicate: false,\n                prependTo: '.slicknav-placeholder',\n                label: 'Main Menu',\n                openedSymbol: '<span class=\"fas fa-angle-up\">',\n                closedSymbol: '<span class=\"fas fa-angle-down\">'\n            });\n\n            //var height = $(window).height();\n            //$('#block-ucsf-main-menu').css({'height': height - 90});\n            //$('.menu-parent-wrapper').css({'height': height - 150, 'overflow-y':'scroll'});\n\n            $('.slicknav_menu .slicknav_btn').on('click', function() {\n               if ($(this).hasClass('slicknav_collapsed')) {\n                   //console.log('menu is being closed');\n                   $('.combined-header-region').removeClass('fixed');\n                   $('body').removeClass('fixed');\n               } else {\n                   //console.log('menu is being opened');\n                   $('body').addClass('fixed');\n               }\n            });\n\n        }\n    };\n\n    Drupal.behaviors.desktopDropdownHeight = {\n        attach: function (context, settings) {\n            $(window, context).once('menu-desktop').each( function() {\n\n                // Set dropdown heights based on the content within.\n                var dropdown = $('[data-level=\"level-0\"]');\n                const resizeMenuPanel = () => {\n\n                    dropdown.each(function () {\n\n                        var self = $(this);\n                        // reset the height on screen resize\n                        self.height(\"auto\")\n                        var mainHeight = self.height();\n                        var childMenu = self.find('.menu-child--wrapper');\n                        var totalHeight = mainHeight;\n                        var childHeight = 0;\n\n                        childMenu.each(function () {\n                            childHeight = $(this)[0].clientHeight;\n                            if ((childHeight + 48) >= mainHeight) {\n                                totalHeight = childHeight;\n                            }\n                        });\n\n                        self.height(totalHeight + 68);\n                        self.find('.menu-child--label').width(totalHeight + 20);\n\n                        // Get the height of the ul .menu-child--menu\n                        const $innerMenu = self.children('.menu-child--menu');\n                        const innerMenuHeight = $innerMenu.height();\n\n                        // Set the min-height of each of the ul's child data-level=\"level-1\"\n                        // so that inner menu panel has enough height to hover from parent link to it\n                        if ($innerMenu.length !== 0) {\n                            console.log(innerMenuHeight);\n                            var $innerMenuChild = $innerMenu.find('[data-level=\"level-1\"]');\n                            $innerMenuChild.css('min-height', innerMenuHeight + 'px');\n\n                        }\n                    });\n                }\n\n                // Select and loop the container element of the elements you want to equalise\n                resizeMenuPanel();\n\n                // At the end of a screen resize.\n                let resizeTimer = null;\n                $(window).on('resize', context, () => {\n                    clearTimeout(resizeTimer);\n                    resizeTimer = setTimeout(() => {\n                        // resizing has \"stopped\".\n                        resizeMenuPanel();\n                    }, 250);\n                });\n\n                var nolink = $('.menu-item a.nolink');\n                nolink.each(function() {\n                    $(this).on('click', function(event){\n                        event.preventDefault();\n                    });\n\n                });\n\n                $('.menu-item-parent').click(function() {\n                    const $this = $(this);\n                    // do not add 'menu-item-open' class if the menu item is search\n                    if ($this.hasClass('search')) {\n                        $this.siblings().removeClass('menu-item-open');\n                        return;\n                    };\n                    $this.addClass('menu-item-open').siblings().removeClass('menu-item-open');\n                });\n\n                $('.menu-item-close').click(function(e) {\n                    e.stopPropagation(); // Key line to work perfectly\n                    if ($(this).parent().parent().hasClass('menu-item-open')) {\n                    $(this).parent().parent().removeClass('menu-item-open');\n                    };\n                });\n\n                // Shows menus when it's being tabbed through\n                const $dropdown = $('.menu-child--wrapper', context);\n                $dropdown.on('focusin', function() {\n                    // Menu dropdowns open on focus.\n                    $(this).parents('.menu-item--expanded').addClass('menu-item-open');\n                });\n\n                // Menu dropdown closes when focus is out.\n                $dropdown.on('focusout', function() {\n                    const $this = $(this);\n                    // Waits and only removes class if newly focused element is outside the dropdown\n                    setTimeout(function() {\n                        // Closes second level subnav\n                        if ($(document.activeElement).parents('.menu-child--wrapper').length === 0) {\n                            $this.parents('.menu-item-parent').removeClass('menu-item-open');\n                        }\n                        // Closes the third level subnav if the current focused element is not in it.\n                        else if ($this.has(document.activeElement).length === 0) {\n                            $this.parents('.menu-item--expanded').first().removeClass('menu-item-open');\n                        }\n                    }, 50);\n                });\n\n            });\n\n        }\n    };\n\n    Drupal.behaviors.searchMenuAction = {\n\n        attach: function (context, settings) {\n            const $searchToggle = $('.menu-parent--wrapper .menu-item.search > a', context);\n            const $search = $('.wrapper--search-menu', context);\n            $searchToggle.click(function (e) {\n                e.preventDefault();\n                $search.toggleClass('active');\n                $searchToggle.toggleClass('active');\n                if ($searchToggle.hasClass('active')) {\n                    $('.wrapper--search-menu .home-search__form-input').focus();\n                }\n            });\n\n            $('.menu-parent--wrapper .menu-item', context).click(function (e) {\n                // If other menu item is clicked close search form\n                if (!$(this).hasClass('search')) {\n                    $search.removeClass('active');\n                    $searchToggle.removeClass('active');\n                }\n            });\n\n            //Search form opens when focus is inside.\n            $search.on('focusin', function() {\n                $search.addClass('active');\n                $searchToggle.addClass('active'); // changes toggle icon\n            })\n\n            //Search form closes when tabbing away.\n            $search.on('focusout', function() {\n                //Wait and only remove classes if newly focused element is outside the search form\n                setTimeout(function() {\n                    // When browser cant find activeElement it returns <body> or null\n                    // which triggers the false positive for document.activeElement.closest('.wrapper--search-menu') === null\n                    // Clicking on the label inside search box caused this behavior, since labels don't receive focus\n                    if (document.activeElement === document.body || document.activeElement === null) {\n                        return;\n                    }\n\n                    // Close the search box if the currently focused el.\n                    //  is not inside the search box\n                    if (document.activeElement.closest('.wrapper--search-menu') === null) {\n                      $search.removeClass('active');\n                      $searchToggle.removeClass('active');\n                    }\n                    // delay needs to be at least 150 to avoid a race condition with $searchToggle.toggleClass('active');\n                }, 150);\n            });\n        }\n    };\n\n    /**\n     * Idea came from Stackoverflow\n     * Basically wrap all your breakpoints not IE compatible with the body:not(.explorer) {} expression\n     * https://stackoverflow.com/questions/15388967/possible-to-disable-media-queries-or-force-a-resolution-reason-allow-an-iphon\n     * This wasn't viable since the breakpoint and call order was backward in the SCSS files of course!\n     */\n    Drupal.behaviors.fixExplorer = {\n        attach: function (context, settings) {\n            var version = detectIE();\n\n            if (version) {\n                if (Number(version) <= 11) {\n                    $('body', context).once('fixExplorer').addClass('explorer');\n                    $('.skip-link').once('fixExplorer').after('<div class=\"ie-message\">' +\n                        'Looks like you’re visiting us on Internet Explorer. For the best UCSF.edu experience, ' +\n                        'please use <a href=\"https://www.google.com/chrome/\" target=\"_blank\">Chrome</a> or <a href=\"https://www.mozilla.org/en-US/firefox/new/\" target=\"_blank\">Firefox</a>. ' +\n                        '</div>'\n                    );\n                }\n            }\n        }\n    };\n\n    Drupal.behaviors.fixHeights = {\n        attach: function (context, settings) {\n            $(window, context).once('fixheight').each( function() {\n                // Select and loop the container element of the elements you want to equalise\n                resizeCards();\n\n                var intstop = 0;\n                var intervals = setInterval(function() {\n                    resizeCards();\n                    intstop++;\n                    // console.log('interval number: '+ intstop);\n                    if (intstop==2) clearInterval(intervals);\n                 }, 3500);\n\n\n                // At the end of a screen resize, card sizes.\n                let resizeTimer = null;\n                $(window).on('resize', context, () => {\n                    clearTimeout(resizeTimer);\n                    resizeTimer = setTimeout(() => {\n                        // resizing has \"stopped\".\n                        resizeCards();\n                    }, 250);\n                });\n            });\n        }\n    };\n\n    /**\n     * detect IE\n     * returns version of IE or false, if browser is not Internet Explorer\n\n    function detectIE() {\n        var ua = window.navigator.userAgent;\n\n        var msie = ua.indexOf('MSIE ');\n        if (msie > 0) {\n            // IE 10 or older => return version number\n            return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\n        }\n\n        var trident = ua.indexOf('Trident/');\n        if (trident > 0) {\n            // IE 11 => return version number\n            var rv = ua.indexOf('rv:');\n            return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\n        }\n        // other browser\n        return false;\n     }\n     */\n\n\n    function detectIE() {\n        var ua = window.navigator.userAgent;\n\n        // Test values; Uncomment to check result …\n\n        // IE 10\n        // ua = 'Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0)';\n\n        // IE 11\n        // ua = 'Mozilla/5.0 (Windows NT 6.3; Trident/7.0; rv:11.0) like Gecko';\n\n        // Edge 12 (Spartan)\n        // ua = 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.71 Safari/537.36 Edge/12.0';\n\n        // Edge 13\n        // ua = 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Safari/537.36 Edge/13.10586';\n\n        var msie = ua.indexOf('MSIE ');\n        if (msie > 0) {\n            // IE 10 or older => return version number\n            return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\n        }\n\n        var trident = ua.indexOf('Trident/');\n        if (trident > 0) {\n            // IE 11 => return version number\n            var rv = ua.indexOf('rv:');\n            return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\n        }\n\n        var edge = ua.indexOf('Edge/');\n        if (edge > 0) {\n            // Edge (IE 12+) => return version number\n            return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);\n        }\n\n        // other browser\n        return false;\n    }\n\n    function resizeCards() {\n        $('.layout-columns__2, .layout-columns__3, .layout-columns__4').each(function() {\n            // Cache the highest\n            let highestBox = 0;\n\n            // FYI, There are some cards that need the sizing done on a parent\n            // wrapper, and some that need it on an inner child. This is\n            // confusing but due to the way the markup is, we have no other\n            // option.\n            // For example: .field-content-promotional-conten can be by itself\n            // or it can be a sibling to an image. This causes boxes to get\n            // miscalculated. So if .field-content-promotional-image is a\n            // previous sibling we have to apply the style to the parent\n            // wrapper.\n            let $items = $('.fact-card, .promo-list__card, .field-content-promotional-conten, .field-column-content-content:has(.field-content-promotional-image)', this);\n\n            // Exit if this column doesn't have anything needing resized.\n            if ($items.length < 1) {\n                return;\n            }\n\n            // Remove a selector if it is actually a child of the real box selector.\n            $items = $items.filter(function () {\n                if (!$(this).prev('.field-content-promotional-image').length) {\n                    return $(this)\n                }\n            });\n\n            // Clear the current height values.\n            $items.css('height', 'auto');\n\n            // Select and loop the elements you want to equalise\n            $items.each(function () {\n                const $this = $(this);\n                // If this box is higher than the cached highest then store it\n                if ($this.innerHeight() > highestBox) {\n                    highestBox = $this.innerHeight();\n                }\n            });\n\n            // Set the height of all those children to whichever was highest\n            $items.css('height', highestBox + 'px');\n        });\n    }\n\n    // for emergency alerts\n    $('.emergency-alert__toggle').on('click', function(e) {\n        const $this = $(this);\n        $this.closest('.emergency-alert').toggleClass('emergency-alert--collapsed'); //you can list several class names\n\n        if ($this.attr('aria-expanded') === 'true') {\n            $this.attr('aria-expanded', 'false')\n        } else {\n            $this.attr('aria-expanded', 'true')\n        }\n        e.preventDefault();\n    });\n\n    $.urlParam = function(name){\n      var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);\n      if (results==null){\n         return '';\n      }\n      else{\n         return results[1] || 0;\n      }\n    }\n\n    $('#email').val(decodeURIComponent($.urlParam('email')));\n\n    // Main menu search form redirect\n    Drupal.behaviors.mainMenuSearchFilter = {\n        attach: function attach(context, settings) {\n            // Selector for the form.\n            const $form = $('.search__form', context)\n            $form.submit(function() {\n                const $this = $(this);\n                // Find checked radio button inside the form and get it's value.\n                const option = $this.find('.search-filter__radio:checked').val();\n                // If value is \"News\" redirect to news filter search.\n                if (option === 'News') {\n                    $this.attr('action', '/news/filter');\n                    $this.find('.home-search__form-input')\n                        .attr('name', 'combine');\n                }\n\n                return true;\n            });\n        }\n    };\n\n})(jQuery);\n"]}