{"version":3,"sources":["all.js"],"names":["$","window","Drupal","behaviors","dieToolbardie","attach","context","matchMedia","addListener","event","matches","click","slickNav","settings","slicknav","duplicate","prependTo","label","openedSymbol","closedSymbol","on","hasClass","removeClass","addClass","fixHeights","once","each","resizeCards","intstop","intervals","setInterval","clearInterval","resizeTimer","clearTimeout","setTimeout","highestBox","$items","length","filter","prev","css","$this","innerHeight","e","closest","toggleClass","attr","preventDefault","urlParam","name","results","RegExp","exec","location","href","val","decodeURIComponent","find","removeSpaceFromEmptyElement","document","querySelector","emptyNarrowPageElement","querySelectorAll","styles","forEach","element","hasChildNodes","style","checkIfHasCardWithOffsetColor","offsetCardWithColor","mql","screenTest","jQuery"],"mappings":"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","file":"all.js","sourcesContent":["/* eslint-disable */\n(function ($, window) {\n    'use strict';\n\n    Drupal.behaviors.dieToolbardie = {\n        attach: function (context) {\n            window.matchMedia('(min-width: 975px)').addListener(function (event) {\n                event.matches ? $('#toolbar-item-administration', context).click() : $('.toolbar-item.is-active', context).click();\n            });\n        }\n    };\n\n\n    Drupal.behaviors.slickNav = {\n        attach: function (context, settings) {\n\n            $('.main-menu--mobile').slicknav({\n                duplicate: false,\n                prependTo: '.slicknav-placeholder',\n                label: 'Main Menu',\n                openedSymbol: '<span class=\"fas fa-angle-up\">',\n                closedSymbol: '<span class=\"fas fa-angle-down\">'\n            });\n\n            //var height = $(window).height();\n            //$('#block-ucsf-main-menu').css({'height': height - 90});\n            //$('.menu-parent-wrapper').css({'height': height - 150, 'overflow-y':'scroll'});\n\n            $('.slicknav_menu .slicknav_btn').on('click', function() {\n               if ($(this).hasClass('slicknav_collapsed')) {\n                   //console.log('menu is being closed');\n                   $('.combined-header-region').removeClass('fixed');\n                   $('body').removeClass('fixed');\n               } else {\n                   //console.log('menu is being opened');\n                   $('body').addClass('fixed');\n               }\n            });\n\n        }\n    };\n\n    Drupal.behaviors.fixHeights = {\n        attach: function (context, settings) {\n            $(window, context).once('fixheight').each( function() {\n                // Select and loop the container element of the elements you want to equalise\n                resizeCards();\n\n                var intstop = 0;\n                var intervals = setInterval(function() {\n                    resizeCards();\n                    intstop++;\n                    // console.log('interval number: '+ intstop);\n                    if (intstop==2) clearInterval(intervals);\n                 }, 3500);\n\n\n                // At the end of a screen resize, card sizes.\n                let resizeTimer = null;\n                $(window).on('resize', context, () => {\n                    clearTimeout(resizeTimer);\n                    resizeTimer = setTimeout(() => {\n                        // resizing has \"stopped\".\n                        resizeCards();\n                    }, 250);\n                });\n            });\n        }\n    };\n\n    function resizeCards() {\n        $('.layout-columns__2, .layout-columns__3, .layout-columns__4').each(function() {\n            // Cache the highest\n            let highestBox = 0;\n\n            // FYI, There are some cards that need the sizing done on a parent\n            // wrapper, and some that need it on an inner child. This is\n            // confusing but due to the way the markup is, we have no other\n            // option.\n            // For example: .field-content-promotional-conten can be by itself\n            // or it can be a sibling to an image. This causes boxes to get\n            // miscalculated. So if .field-content-promotional-image is a\n            // previous sibling we have to apply the style to the parent\n            // wrapper.\n            let $items = $('.fact-card, .promo-list__card, .field-content-promotional-conten, .field-column-content-content:has(.field-content-promotional-image)', this);\n\n            // Exit if this column doesn't have anything needing resized.\n            if ($items.length < 1) {\n                return;\n            }\n\n            // Remove a selector if it is actually a child of the real box selector.\n            $items = $items.filter(function () {\n                if (!$(this).prev('.field-content-promotional-image').length) {\n                    return $(this)\n                }\n            });\n\n            // Clear the current height values.\n            $items.css('height', 'auto');\n\n            // Select and loop the elements you want to equalise\n            $items.each(function () {\n                const $this = $(this);\n                // If this box is higher than the cached highest then store it\n                if ($this.innerHeight() > highestBox) {\n                    highestBox = $this.innerHeight();\n                }\n            });\n\n            // Set the height of all those children to whichever was highest\n            $items.css('height', highestBox + 'px');\n        });\n    }\n\n    // for emergency alerts\n    $('.emergency-alert__toggle').on('click', function(e) {\n        const $this = $(this);\n        $this.closest('.emergency-alert').toggleClass('emergency-alert--collapsed'); //you can list several class names\n\n        if ($this.attr('aria-expanded') === 'true') {\n            $this.attr('aria-expanded', 'false')\n        } else {\n            $this.attr('aria-expanded', 'true')\n        }\n        e.preventDefault();\n    });\n\n    $.urlParam = function(name){\n      var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);\n      if (results==null){\n         return '';\n      }\n      else{\n         return results[1] || 0;\n      }\n    }\n\n    $('#email').val(decodeURIComponent($.urlParam('email')));\n\n  // Need a class on center aligned videos to fix width issue;\n  $('.align-center').each(function() {\n    if ($(this).find('.media--type-remote-video').length > 0) {\n      $(this).addClass('align-center--video');\n    };\n  });\n\n\n  // when article ckeditor body is left empty because content lives in Paragraphs,\n  //  it leaves a gap between header and those elements.\n  const removeSpaceFromEmptyElement = () => {\n    if (document.querySelector('.page_narrow')) {\n      const emptyNarrowPageElement = document.querySelectorAll('.page_narrow')\n      let styles = `\n        padding-top:0;\n        margin-top:-1px;\n        margin-bottom:-1px;`\n\n      emptyNarrowPageElement.forEach(element => {\n        if (!element.hasChildNodes()) {\n          element.style = styles;\n        }\n      });\n    }\n  }\n\n  const checkIfHasCardWithOffsetColor = () => {\n    const offsetCardWithColor = document.querySelectorAll('.card-with-offset-color');\n    // console.log(offsetCardWithColor)\n\n    offsetCardWithColor.forEach(element => {\n\n      $(element).closest('.layout-column').addClass(\"has-card-with-offset-color\");\n    });\n  }\n\n\n  // Check screen size.\n   const mql = window.matchMedia('(max-width: 1049px)');\n\n  function screenTest(event) {\n    if (event.matches) {\n      /* the viewport is 1049 pixels wide or less */\n      checkIfHasCardWithOffsetColor()\n    } else {\n      /* the viewport is more than 1049 pixels wide */\n      removeSpaceFromEmptyElement()\n    }\n  }\n\n  screenTest(mql);\n  mql.addListener(screenTest);\n\n})(jQuery, window);\n"]}