{"version":3,"sources":["all.js"],"names":["$","Drupal","behaviors","dieToolbardie","attach","context","window","matchMedia","addListener","event","matches","click","slickNav","settings","slicknav","duplicate","prependTo","label","openedSymbol","closedSymbol","on","hasClass","removeClass","addClass","desktopDropdownHeight","dropdown","each","self","mainHeight","height","childMenu","find","totalHeight","childHeight","clientHeight","width","nolink","preventDefault","siblings","e","stopPropagation","parent","searchMenuAction","toggleClass","focus","hover","fixExplorer","version","detectIE","Number","once","after","fixHeights","intstop","intervals","setInterval","resizeCards","clearInterval","resize","ua","navigator","userAgent","msie","indexOf","parseInt","substring","trident","rv","edge","highestBox","jQuery"],"mappings":"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","file":"all.js","sourcesContent":["/* eslint-disable */\n(function ($) {\n    'use strict';\n\n    Drupal.behaviors.dieToolbardie = {\n        attach: function (context) {\n            window.matchMedia('(min-width: 975px)').addListener(function (event) {\n                event.matches ? $('#toolbar-item-administration', context).click() : $('.toolbar-item.is-active', context).click();\n            });\n        }\n    };\n\n\n    Drupal.behaviors.slickNav = {\n        attach: function (context, settings) {\n\n            $('#block-ucsf-main-menu').slicknav({\n                duplicate: false,\n                prependTo: '.slicknav-placeholder',\n                label: 'Main Menu',\n                openedSymbol: '<i class=\"fas fa-angle-up\">',\n                closedSymbol: '<i class=\"fas fa-angle-down\">'\n            });\n\n            //var height = $(window).height();\n            //$('#block-ucsf-main-menu').css({'height': height - 90});\n            //$('.menu-parent-wrapper').css({'height': height - 150, 'overflow-y':'scroll'});\n\n            $('.slicknav_menu .slicknav_btn').on('click', function() {\n               if ($(this).hasClass('slicknav_collapsed')) {\n                   //console.log('menu is being closed');\n                   $('.combined-header-region').removeClass('fixed');\n                   $('body').removeClass('fixed');\n               } else {\n                   //console.log('menu is being opened');\n                   $('body').addClass('fixed');\n               }\n            });\n\n        }\n    };\n\n    Drupal.behaviors.desktopDropdownHeight = {\n        attach: function (context, settings) {\n\n            // Set dropdown heights based on the content within.\n            var dropdown = $('[data-level=\"level-0\"]');\n\n            dropdown.each(function () {\n\n                var self = $(this);\n                var mainHeight = self.height();\n                var childMenu = self.find('.menu-child--wrapper');\n                var totalHeight = mainHeight;\n                var childHeight = 0;\n\n                childMenu.each(function () {\n                    childHeight = $(this)[0].clientHeight;\n                    if ((childHeight + 48) >= mainHeight) {\n                        totalHeight = childHeight;\n                    }\n                });\n                childMenu.each(function () {\n                    $(this).height(totalHeight);\n                });\n                self.height(totalHeight + 68);\n                self.find('.menu-child--label').width(totalHeight + 20);\n                //return false;\n            });\n\n            var nolink = $('.menu-item a.nolink');\n            nolink.each(function() {\n                $(this).on('click', function(event){\n                    event.preventDefault();\n                });\n\n            });\n\n            $('.menu-item-parent').click(function() {\n                  $(this).addClass('menu-item-open').siblings().removeClass('menu-item-open');\n            });\n\n              $('.menu-item-close').click(function(e) {\n                e.stopPropagation(); // Key line to work perfectly\n                if ($(this).parent().parent().hasClass('menu-item-open')) {\n                  $(this).parent().parent().removeClass('menu-item-open');\n                };\n              });\n\n        }\n    };\n\n    Drupal.behaviors.searchMenuAction = {\n\n        attach: function (context, settings) {\n            $('.menu-parent--wrapper .menu-item.search > a', context).click(function (e) {\n                e.preventDefault();\n                $('.wrapper--search-menu').toggleClass('active');\n                $('.menu-parent--wrapper .menu-item.search > a').toggleClass('active');\n                $('.wrapper--search-menu .home-search__form-input').focus();\n            });\n\n            $('.menu-parent--wrapper .menu-item', context).hover(function (e) {\n                if ($(this).hasClass('search')) {\n                    //console.log('search menu');\n                } else {\n                    $('.wrapper--search-menu').removeClass('active');\n                    $('.menu-parent--wrapper .menu-item.search > a').removeClass('active');\n                }\n            });\n        }\n    };\n\n    /**\n     * Idea came from Stackoverflow\n     * Basically wrap all your breakpoints not IE compatible with the body:not(.explorer) {} expression\n     * https://stackoverflow.com/questions/15388967/possible-to-disable-media-queries-or-force-a-resolution-reason-allow-an-iphon\n     * This wasn't viable since the breakpoint and call order was backward in the SCSS files of course!\n     */\n    Drupal.behaviors.fixExplorer = {\n        attach: function (context, settings) {\n            var version = detectIE();\n\n            if (Number(version) <= 11) {\n                $('body', context).once('fixExplorer').addClass('explorer');\n                $('.skip-link').once('fixExplorer').after('<div class=\"ie-message\">' +\n                    'Looks like you’re visiting us on Internet Explorer. For the best UCSF.edu experience, ' +\n                    'please use <a href=\"https://www.google.com/chrome/\" target=\"_blank\">Chrome</a> or <a href=\"https://www.mozilla.org/en-US/firefox/new/\" target=\"_blank\">Firefox</a>. ' +\n                    '</div>'\n                );\n            }\n\n            if (Number(version) >= 12) {\n                $('body', context).once('fixExplorer').addClass('explorer');\n                $('.skip-link').once('fixExplorer').after('<div class=\"ie-message\">' +\n                    'We\\'re currently working to improve our website on Edge. For the best UCSF.edu experience, ' +\n                    'please use <a href=\"https://www.google.com/chrome/\" target=\"_blank\">Chrome</a> or <a href=\"https://www.mozilla.org/en-US/firefox/new/\" target=\"_blank\">Firefox</a>. ' +\n                    '</div>'\n                );\n            }\n        }\n    };\n\n    Drupal.behaviors.fixHeights = {\n        attach: function (context, settings) {\n            // Select and loop the container element of the elements you want to equalise\n            //resizeCards();\n            var intstop = 0;\n            var intervals = setInterval(function() {\n                resizeCards();\n                intstop++;\n                //console.log('interval number: '+ intstop);\n                if (intstop==2) clearInterval(intervals);\n             }, 3500);\n\n            $(window).resize(function() {\n                //this isn't always working, but not sure why\n                resizeCards();\n\n            })\n        }\n    };\n\n    /**\n     * detect IE\n     * returns version of IE or false, if browser is not Internet Explorer\n\n    function detectIE() {\n        var ua = window.navigator.userAgent;\n\n        var msie = ua.indexOf('MSIE ');\n        if (msie > 0) {\n            // IE 10 or older => return version number\n            return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\n        }\n\n        var trident = ua.indexOf('Trident/');\n        if (trident > 0) {\n            // IE 11 => return version number\n            var rv = ua.indexOf('rv:');\n            return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\n        }\n        // other browser\n        return false;\n     }\n     */\n\n\n    function detectIE() {\n        var ua = window.navigator.userAgent;\n\n        // Test values; Uncomment to check result …\n\n        // IE 10\n        // ua = 'Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0)';\n\n        // IE 11\n        // ua = 'Mozilla/5.0 (Windows NT 6.3; Trident/7.0; rv:11.0) like Gecko';\n\n        // Edge 12 (Spartan)\n        // ua = 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.71 Safari/537.36 Edge/12.0';\n\n        // Edge 13\n        // ua = 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Safari/537.36 Edge/13.10586';\n\n        var msie = ua.indexOf('MSIE ');\n        if (msie > 0) {\n            // IE 10 or older => return version number\n            return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\n        }\n\n        var trident = ua.indexOf('Trident/');\n        if (trident > 0) {\n            // IE 11 => return version number\n            var rv = ua.indexOf('rv:');\n            return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\n        }\n\n        var edge = ua.indexOf('Edge/');\n        if (edge > 0) {\n            // Edge (IE 12+) => return version number\n            return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);\n        }\n\n        // other browser\n        return false;\n    }\n\n    function resizeCards() {\n        $('.layout-column, .layout-columns__2, .layout-columns__3, .layout-columns__4').each(function() {\n            // Cache the highest\n            var highestBox = 0;\n\n            // Select and loop the elements you want to equalise\n            $('.fact-card, .promo-list__card, .field-content-promotional-conten', this).each(function () {\n                // If this box is higher than the cached highest then store it\n                if ($(this).height() > highestBox) {\n                    highestBox = $(this).height();\n                }\n            });\n            //console.log('setting card height to : ' + highestBox);\n            // Set the height of all those children to whichever was highest\n            $('.fact-card, .promo-list__card, .field-content-promotional-conten', this).height(highestBox);\n        });\n    }\n\n    // for emergency alerts\n    $('.emergency-alert__header').on('click', function(e) {\n      $('.emergency-alert').toggleClass(\"emergency-alert__collapsed\"); //you can list several class names\n      e.preventDefault();\n    });\n\n})(jQuery);\n"]}