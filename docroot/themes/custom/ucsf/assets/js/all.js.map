{"version":3,"sources":["all.js"],"names":["$","window","once","Drupal","behaviors","dieToolbardie","attach","context","matchMedia","addListener","event","matches","click","slickNav","settings","slicknav","duplicate","prependTo","label","openedSymbol","closedSymbol","on","hasClass","removeClass","addClass","fixHeights","forEach","resizeCards","intstop","intervals","setInterval","clearInterval","resizeTimer","clearTimeout","setTimeout","each","highestBox","$items","length","filter","prev","css","$this","innerHeight","e","closest","toggleClass","attr","preventDefault","urlParam","name","results","RegExp","exec","location","href","val","decodeURIComponent","find","removeSpaceFromEmptyElement","document","querySelector","emptyNarrowPageElement","querySelectorAll","styles","element","hasChildNodes","style","checkIfHasCardWithOffsetColor","offsetCardWithColor","mql","screenTest","jQuery"],"mappings":"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","file":"all.js","sourcesContent":["/* eslint-disable */\n(function ($, window, once) {\n    'use strict';\n\n    Drupal.behaviors.dieToolbardie = {\n        attach: function (context) {\n            window.matchMedia('(min-width: 975px)').addListener(function (event) {\n                event.matches ? $('#toolbar-item-administration', context).click() : $('.toolbar-item.is-active', context).click();\n            });\n        }\n    };\n\n\n    Drupal.behaviors.slickNav = {\n        attach: function (context, settings) {\n\n            $('.main-menu--mobile').slicknav({\n                duplicate: false,\n                prependTo: '.slicknav-placeholder',\n                label: 'Main Menu',\n                openedSymbol: '<span class=\"fas fa-angle-up\">',\n                closedSymbol: '<span class=\"fas fa-angle-down\">'\n            });\n\n            //var height = $(window).height();\n            //$('#block-ucsf-main-menu').css({'height': height - 90});\n            //$('.menu-parent-wrapper').css({'height': height - 150, 'overflow-y':'scroll'});\n\n            $('.slicknav_menu .slicknav_btn').on('click', function() {\n               if ($(this).hasClass('slicknav_collapsed')) {\n                   //console.log('menu is being closed');\n                   $('.combined-header-region').removeClass('fixed');\n                   $('body').removeClass('fixed');\n               } else {\n                   //console.log('menu is being opened');\n                   $('body').addClass('fixed');\n               }\n            });\n\n        }\n    };\n\n    Drupal.behaviors.fixHeights = {\n      attach: function (context, settings) {\n        once('fixheight', 'html', context).forEach(() => {\n          // Select and loop the container element of the elements you want to equalise\n          resizeCards();\n\n          let intstop = 0;\n          const intervals = setInterval(function() {\n            resizeCards();\n            intstop++;\n            // console.log('interval number: '+ intstop);\n            if (intstop==2) clearInterval(intervals);\n          }, 3500);\n\n\n          // At the end of a screen resize, card sizes.\n          let resizeTimer = null;\n          $('html').on('resize', context, () => {\n            clearTimeout(resizeTimer);\n            resizeTimer = setTimeout(() => {\n              // resizing has \"stopped\".\n              resizeCards();\n            }, 250);\n          });\n        });\n      }\n    };\n\n    function resizeCards() {\n      $('.layout-columns__2, .layout-columns__3, .layout-columns__4').each(function() {\n        // Cache the highest\n        let highestBox = 0;\n\n        // FYI, There are some cards that need the sizing done on a parent\n        // wrapper, and some that need it on an inner child. This is\n        // confusing but due to the way the markup is, we have no other\n        // option.\n        // For example: .field-content-promotional-conten can be by itself\n        // or it can be a sibling to an image. This causes boxes to get\n        // miscalculated. So if .field-content-promotional-image is a\n        // previous sibling we have to apply the style to the parent\n        // wrapper.\n        let $items = $('.fact-card, .promo-list__card, .field-content-promotional-conten, .field-column-content-content:has(.field-content-promotional-image)', this);\n\n        // Exit if this column doesn't have anything needing resized.\n        if ($items.length < 1) {\n          return;\n        }\n\n        // Remove a selector if it is actually a child of the real box selector.\n        $items = $items.filter(function () {\n          if (!$(this).prev('.field-content-promotional-image').length) {\n            return $(this)\n          }\n        });\n\n        // Clear the current height values.\n        $items.css('height', 'auto');\n\n        // Select and loop the elements you want to equalise\n        $items.each(function () {\n          const $this = $(this);\n          // If this box is higher than the cached highest then store it\n          if ($this.innerHeight() > highestBox) {\n            highestBox = $this.innerHeight();\n          }\n        });\n\n        // Set the height of all those children to whichever was highest\n        $items.css('height', highestBox + 'px');\n      });\n    }\n\n    // for emergency alerts\n    $('.emergency-alert__toggle').on('click', function(e) {\n        const $this = $(this);\n        $this.closest('.emergency-alert').toggleClass('emergency-alert--collapsed'); //you can list several class names\n\n        if ($this.attr('aria-expanded') === 'true') {\n            $this.attr('aria-expanded', 'false')\n        } else {\n            $this.attr('aria-expanded', 'true')\n        }\n        e.preventDefault();\n    });\n\n    $.urlParam = function(name){\n      var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);\n      if (results==null){\n         return '';\n      }\n      else{\n         return results[1] || 0;\n      }\n    }\n\n    $('#email').val(decodeURIComponent($.urlParam('email')));\n\n  // Need a class on center aligned videos to fix width issue;\n  $('.align-center').each(function() {\n    if ($(this).find('.media--type-remote-video').length > 0) {\n      $(this).addClass('align-center--video');\n    };\n  });\n\n\n  // when article ckeditor body is left empty because content lives in Paragraphs,\n  //  it leaves a gap between header and those elements.\n  const removeSpaceFromEmptyElement = () => {\n    if (document.querySelector('.page_narrow')) {\n      const emptyNarrowPageElement = document.querySelectorAll('.page_narrow')\n      let styles = `\n        padding-top:0;\n        margin-top:-1px;\n        margin-bottom:-1px;`\n\n      emptyNarrowPageElement.forEach(element => {\n        if (!element.hasChildNodes()) {\n          element.style = styles;\n        }\n      });\n    }\n  }\n\n  const checkIfHasCardWithOffsetColor = () => {\n    const offsetCardWithColor = document.querySelectorAll('.card-with-offset-color');\n    // console.log(offsetCardWithColor)\n\n    offsetCardWithColor.forEach(element => {\n\n      $(element).closest('.layout-column').addClass(\"has-card-with-offset-color\");\n    });\n  }\n\n\n  // Check screen size.\n   const mql = window.matchMedia('(max-width: 1049px)');\n\n  function screenTest(event) {\n    if (event.matches) {\n      /* the viewport is 1049 pixels wide or less */\n      checkIfHasCardWithOffsetColor()\n    } else {\n      /* the viewport is more than 1049 pixels wide */\n      removeSpaceFromEmptyElement()\n    }\n  }\n\n  screenTest(mql);\n  mql.addListener(screenTest);\n\n})(jQuery, window, once);\n"]}