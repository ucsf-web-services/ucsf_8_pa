{"version":3,"sources":["ucsf_header_region_subnav.js"],"names":["$","$header","$body","$subnavToggle","$subnavMenu","menuID","attr","has","addClass","toggleMenu","event","$this","toggleClass","preventDefault","mobileDetect","matches","on","which","removeClass","off","removeAttr","mql","matchMedia","addListener","jQuery"],"mappings":";;AAAA,CAAE,aAAK;;AAEL;AACAA,IAAE,YAAM;AACN;AACA,QAAMC,UAAUD,EAAE,yBAAF,CAAhB;AACA,QAAME,QAAQF,EAAE,MAAF,CAAd;AACA;AACA,QAAMG,gBAAgBH,EAAE,uBAAF,CAAtB;AACA,QAAMI,cAAcJ,EAAE,gBAAF,CAApB;AACA;AACA,QAAMK,SAASL,EAAE,sBAAF,EAA0BM,IAA1B,CAA+B,IAA/B,CAAf;;AAEA;AACAL,YAAQM,GAAR,CAAY,wBAAZ,EAAsCC,QAAtC,CAA+C,oCAA/C;;AAEA,QAAMC,aAAa,SAAbA,UAAa,CAASC,KAAT,EAAgB;AACjC,UAAMC,QAAQX,EAAE,IAAF,CAAd;AACAI,kBAAYQ,WAAZ,CAAwB,yBAAxB;AACAV,YAAMU,WAAN,CAAkB,OAAlB;;AAEA,UAAID,MAAML,IAAN,CAAW,eAAX,MAAgC,MAApC,EAA4C;AAC1CK,cAAML,IAAN,CAAW,eAAX,EAA4B,OAA5B;AACD,OAFD,MAEO;AACLK,cAAML,IAAN,CAAW,eAAX,EAA4B,MAA5B;AACD;;AAEDI,YAAMG,cAAN;AACD,KAZD;;AAcA;AACA,QAAMC,eAAe,SAAfA,YAAe,CAACJ,KAAD,EAAW;AAC9B;AACA,UAAIA,MAAMK,OAAV,EAAmB;AACjBZ,sBAAcG,IAAd,CAAmB,eAAnB,EAAoC,OAApC;AACAH,sBAAcK,QAAd,CAAuB,uBAAvB;AACA;AACAL,sBAAcG,IAAd,CAAmB,EAAC,iBAAgBD,MAAjB,EAAyB,QAAO,QAAhC,EAA0C,YAAW,GAArD,EAAnB;;AAEA;AACAF,sBAAca,EAAd,CAAiB,OAAjB,EAA0BP,UAA1B;AACAN,sBAAca,EAAd,CAAiB,UAAjB,EAA6B,UAACN,KAAD,EAAW;AACtC;AACA,cAAGA,MAAMO,KAAN,KAAgB,EAAnB,EAAuB;AACrBR,uBAAWC,KAAX;AACD;AACF,SALD;;AAOF;AACC,OAhBD,MAgBO;AACLR,cAAMgB,WAAN,CAAkB,OAAlB;AACAf,sBAAcgB,GAAd,CAAkB,OAAlB;AACAhB,sBAAcgB,GAAd,CAAkB,UAAlB;AACAf,oBAAYc,WAAZ,CAAwB,yBAAxB;AACAf,sBAAce,WAAd,CAA0B,uBAA1B;AACA;AACAf,sBAAciB,UAAd,CAAyB,2CAAzB;AACD;AACF,KA3BD;;AA6BA;AACA,QAAMC,MAAMC,WAAW,oBAAX,CAAZ;AACA;AACAR,iBAAaO,GAAb;AACA;AACAA,QAAIE,WAAJ,CAAgBT,YAAhB;AACD,GA/DD;AAiED,CApED,EAoEIU,MApEJ","file":"ucsf_header_region_subnav.js","sourcesContent":["(($ => {\n\n  // Wait for the document to be ready.\n  $(() => {\n    // wrapper for all header elements\n    const $header = $('.combined-header-region');\n    const $body = $('body');\n    // toggle element for expanding the subnav\n    const $subnavToggle = $('.header-subnav__title');\n    const $subnavMenu = $('.header-subnav');\n    // get id from collapsable subnav menu for accessibility controls\n    const menuID = $('.header-subnav__menu').attr('id');\n\n    // add class for css styling\n    $header.has('.header-subnav-wrapper').addClass('combined-header-region--has-subnav');\n\n    const toggleMenu = function(event) {\n      const $this = $(this);\n      $subnavMenu.toggleClass('header-subnav--expanded');\n      $body.toggleClass('fixed')\n\n      if ($this.attr('aria-expanded') === 'true') {\n        $this.attr('aria-expanded', 'false');\n      } else {\n        $this.attr('aria-expanded', 'true');\n      }\n\n      event.preventDefault();\n    }\n\n    // Only execute subnav extend / collapse code in mobile\n    const mobileDetect = (event) => {\n      // Mobile\n      if (event.matches) {\n        $subnavToggle.attr('aria-expanded', 'false');\n        $subnavToggle.addClass('header-subnav__toggle')\n        // set area controls and role on the title\n        $subnavToggle.attr({\"aria-controls\":menuID, \"role\":\"button\", 'tabindex':'0'});\n\n        // toggle mobile subnav menu open and closed\n        $subnavToggle.on('click', toggleMenu);\n        $subnavToggle.on('keypress', (event) => {\n          // If Enter key was pressed\n          if(event.which === 13) {\n            toggleMenu(event);\n          }\n        });\n\n      // Desktop\n      } else {\n        $body.removeClass('fixed')\n        $subnavToggle.off('click');\n        $subnavToggle.off('keypress');\n        $subnavMenu.removeClass('header-subnav--expanded');\n        $subnavToggle.removeClass('header-subnav__toggle');\n        // Remove unnecessary Aria controls from desktop subnav\n        $subnavToggle.removeAttr('aria-expanded aria-controls role tabindex');\n      }\n    }\n\n    // Use MatchMedia to ensure that subnav expand/collapse is only happening in mobile\n    const mql = matchMedia('(max-width: 849px)');\n    // Detect mobile on page load.\n    mobileDetect(mql);\n    // Watch to see if the page size changes.\n    mql.addListener(mobileDetect);\n  });\n\n}))(jQuery);\n"]}