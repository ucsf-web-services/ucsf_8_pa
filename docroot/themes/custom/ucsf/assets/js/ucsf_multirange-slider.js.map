{"version":3,"sources":["ucsf_multirange-slider.js"],"names":["$","$selectMin","$selectMax","minRange","parseInt","find","text","maxRange","currentMinValue","currentMaxValue","$publicationRange","slider","range","min","max","step","values","slide","event","ui","stop","$selectMinOptionVal","val","$selectMaxOptionVal","undefined","handleMin","first","attr","yearLabelMin","append","handleMax","last","yearLabelMax","trackLabel","jQuery"],"mappings":";;AAAA,CAAE,aAAK;AACL;AACAA,IAAE,YAAM;AACN,QAAMC,aAAaD,EAAE,mCAAF,CAAnB;AACA,QAAME,aAAaF,EAAE,mCAAF,CAAnB;;AAEA;AACA,QAAMG,WAAWC,SAASH,WAAWI,IAAX,CAAgB,qBAAhB,EAAuCC,IAAvC,EAAT,CAAjB;AACA,QAAMC,WAAWH,SAASF,WAAWG,IAAX,CAAgB,qBAAhB,EAAuCC,IAAvC,EAAT,CAAjB;;AAEA;AACA,QAAIE,kBAAkBL,QAAtB;AACA,QAAIM,kBAAkBF,QAAtB;;AAIA;AACA,QAAMG,oBAAoBV,EAAE,oBAAF,CAA1B;AACAU,sBAAkBC,MAAlB,CAAyB;AACvBC,aAAO,IADgB;AAEvBC,WAAKV,QAFkB;AAGvBW,WAAKP,QAHkB;AAIvBQ,YAAM,CAJiB;AAKvBC,cAAQ,CAACR,eAAD,EAAkBC,eAAlB,CALe;;AAOvB;AACAQ,aAAO,eAASC,KAAT,EAAgBC,EAAhB,EAAoB;AACzBX,0BAAkBW,GAAGH,MAAH,CAAU,CAAV,CAAlB;AACAP,0BAAkBU,GAAGH,MAAH,CAAU,CAAV,CAAlB;;AAEA;AACAhB,UAAE,YAAF,EAAgBM,IAAhB,CAAqBE,eAArB;AACAR,UAAE,YAAF,EAAgBM,IAAhB,CAAqBG,eAArB;AACD,OAfsB;;AAiBvBW,YAAM,cAASF,KAAT,EAAgBC,EAAhB,EAAoB;AACxBX,0BAAkBW,GAAGH,MAAH,CAAU,CAAV,CAAlB;AACAP,0BAAkBU,GAAGH,MAAH,CAAU,CAAV,CAAlB;;AAEA;AACA,YAAIK,sBAAsBpB,WAAWI,IAAX,sBAAmCG,eAAnC,QAAuDc,GAAvD,EAA1B;AACA,YAAIC,sBAAsBrB,WAAWG,IAAX,sBAAmCI,eAAnC,QAAuDa,GAAvD,EAA1B;;AAEA;AACA,YAAID,wBAAwBG,SAA5B,EAAuC;AACrCH,gCAAsB,KAAtB;AACD;AACD,YAAIE,wBAAwBC,SAA5B,EAAuC;AACrCD,gCAAsB,KAAtB;AACD;;AAED;AACAtB,mBAAWqB,GAAX,CAAeD,mBAAf;AACAnB,mBAAWoB,GAAX,CAAeC,mBAAf;AACD;AApCsB,KAAzB;;AAuCA;AACA,QAAME,YAAYzB,EAAE,mBAAF,EAAuB0B,KAAvB,EAAlB;AACAD,cAAUE,IAAV,CAAe;AACb,qBAAc;AADD,KAAf;;AAIA;AACA,QAAMC,+KAKApB,eALA,oBAAN;AAOAiB,cAAUI,MAAV,CAAiBD,YAAjB;;AAGA;AACA,QAAME,YAAY9B,EAAE,mBAAF,EAAuB+B,IAAvB,EAAlB;AACAD,cAAUH,IAAV,CAAe;AACb,qBAAc;AADD,KAAf;;AAIA;AACA,QAAMK,+KAKAvB,eALA,oBAAN;AAOAqB,cAAUD,MAAV,CAAiBG,YAAjB;;AAEA;AACA;AACA,QAAMC,yJAGM9B,QAHN,gFAKMI,QALN,wBAAN;AAOAP,MAAE,oBAAF,EAAwB6B,MAAxB,CAA+BI,UAA/B;AACD,GAlGD;AAmGD,CArGD,EAqGIC,MArGJ","file":"ucsf_multirange-slider.js","sourcesContent":["(($ => {\n  // Wait for the document to be ready.\n  $(() => {\n    const $selectMin = $(\"#edit-field-date-and-time-value-1\");\n    const $selectMax = $(\"#edit-field-date-and-time-value-2\");\n\n    // Min and Max year range.\n    const minRange = parseInt($selectMin.find('option:nth-child(2)').text());\n    const maxRange = parseInt($selectMax.find('option:nth-child(2)').text());\n\n    // Default values for min and max publication year handles\n    let currentMinValue = minRange;\n    let currentMaxValue = maxRange;\n\n\n\n    // JQUERY SLIDER UI OBJECT https://api.jqueryui.com/slider/#event-slide\n    const $publicationRange = $('.publication-range');\n    $publicationRange.slider({\n      range: true,\n      min: minRange,\n      max: maxRange,\n      step: 1,\n      values: [currentMinValue, currentMaxValue],\n\n      // Triggered on every mouse move during slide\n      slide: function(event, ui) {\n        currentMinValue = ui.values[0];\n        currentMaxValue = ui.values[1];\n\n        // Update floating labels for handles\n        $('.min-limit').text(currentMinValue);\n        $('.max-limit').text(currentMaxValue);\n      },\n\n      stop: function(event, ui) {\n        currentMinValue = ui.values[0];\n        currentMaxValue = ui.values[1];\n\n        // Find out what the select value of a chosen date is.\n        let $selectMinOptionVal = $selectMin.find(`option:contains(${currentMinValue})`).val();\n        let $selectMaxOptionVal = $selectMax.find(`option:contains(${currentMaxValue})`).val();\n\n        // Sanitize.\n        if ($selectMinOptionVal === undefined) {\n          $selectMinOptionVal = 'All'\n        }\n        if ($selectMaxOptionVal === undefined) {\n          $selectMaxOptionVal = 'All'\n        }\n\n        // Set the selected option.\n        $selectMin.val($selectMinOptionVal);\n        $selectMax.val($selectMaxOptionVal);\n      }\n    });\n\n    // Minimum Publication Year handle\n    const handleMin = $('.ui-slider-handle').first();\n    handleMin.attr({\n      'data-testid':'puplication-year-min',\n    });\n\n    // Create floating labe for Minimum Publication Year handle\n    const yearLabelMin =\n      `<span class='ui-slider__handle-label min-limit'>\n        <span class='visually-hidden'>\n          Minimum year of publication:\n        </span>\n        ${currentMinValue}\n      </span>`;\n    handleMin.append(yearLabelMin);\n\n\n    // Maximum Publication Year handle\n    const handleMax = $('.ui-slider-handle').last();\n    handleMax.attr({\n      'data-testid':'puplication-year-max',\n    });\n\n    // Create floating label for Maximum Publication Year handle\n    const yearLabelMax =\n      `<span class='ui-slider__handle-label max-limit'>\n        <span class='visually-hidden'>\n          Maximum year of publication:\n        </span>\n        ${currentMaxValue}\n      </span>`;\n    handleMax.append(yearLabelMax);\n\n    // TRACK FOR RANGE SLIDER\n    // Label for the range track\n    const trackLabel =\n      `<p class='ui-slider__track-label'>\n        <span class='visually-hidden'>Available publication years range from</span>\n        <span>${minRange}</span>\n        <span class='visually-hidden'>to</span>\n        <span>${maxRange}</span>\n      </p>`;\n    $('.publication-range').append(trackLabel);\n  });\n}))(jQuery);\n"]}