{"version":3,"sources":["ucsf_multirange-slider.js"],"names":["$","$dropdownPanel","$selectMin","$selectMax","minRange","parseInt","find","text","maxRange","currentMinValue","currentMaxValue","$publicationRange","slider","range","min","max","step","values","slide","event","ui","stop","$selectMinOptionVal","val","$selectMaxOptionVal","undefined","handleMin","first","attr","yearLabelMin","append","handleMax","last","yearLabelMax","trackLabel","updateSlider","$selectMinOption","$selectMaxOption","isNaN","one","click","hasClass","jQuery"],"mappings":"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","file":"ucsf_multirange-slider.js","sourcesContent":["(($ => {\n  // Wait for the document to be ready.\n  $(() => {\n    const $dropdownPanel = $('.search-filter__dropdown');\n\n    const $selectMin = $('#edit-field-date-and-time-value-1');\n    const $selectMax = $('#edit-field-date-and-time-value-2');\n\n    // Min and Max year range.\n    const minRange = parseInt($selectMin.find('option:nth-child(2)').text());\n    const maxRange = parseInt($selectMax.find('option:nth-child(2)').text());\n\n    // Default values for min and max publication year handles\n    let currentMinValue = minRange;\n    let currentMaxValue = maxRange;\n\n    // JQUERY SLIDER UI OBJECT https://api.jqueryui.com/slider/#event-slide\n    const $publicationRange = $('.publication-range');\n    $publicationRange.slider({\n      range: true,\n      min: minRange,\n      max: maxRange,\n      step: 1,\n      values: [currentMinValue, currentMaxValue],\n\n      // Triggered on every mouse move during slide\n      slide: function(event, ui) {\n        currentMinValue = ui.values[0];\n        currentMaxValue = ui.values[1];\n\n        // Update floating labels for handles\n        $('.min-limit').text(currentMinValue);\n        $('.max-limit').text(currentMaxValue);\n      },\n\n      stop: function(event, ui) {\n        currentMinValue = ui.values[0];\n        currentMaxValue = ui.values[1];\n\n        // Find out what the select value of a chosen date is.\n        let $selectMinOptionVal = $selectMin.find(`option:contains(${currentMinValue})`).val();\n        let $selectMaxOptionVal = $selectMax.find(`option:contains(${currentMaxValue})`).val();\n\n        // Sanitize.\n        if ($selectMinOptionVal === undefined) {\n          $selectMinOptionVal = 'All'\n        }\n        if ($selectMaxOptionVal === undefined) {\n          $selectMaxOptionVal = 'All'\n        }\n\n        // Set the selected option.\n        $selectMin.val($selectMinOptionVal);\n        $selectMax.val($selectMaxOptionVal);\n      }\n    });\n\n    // Minimum Publication Year handle\n    const handleMin = $('.ui-slider-handle').first();\n    handleMin.attr({\n      'data-testid':'puplication-year-min',\n    });\n\n    // Create floating labe for Minimum Publication Year handle\n    const yearLabelMin =\n      `<span class='visually-hidden'>Minimum year of publication:</span>\n      <span class='ui-slider__handle-label min-limit'></span>`;\n    handleMin.append(yearLabelMin);\n\n\n    // Maximum Publication Year handle\n    const handleMax = $('.ui-slider-handle').last();\n    handleMax.attr({\n      'data-testid':'puplication-year-max',\n    });\n\n    // Create floating label for Maximum Publication Year handle\n    const yearLabelMax =\n      `<span class='visually-hidden'>Maximum year of publication:</span>\n      <span class='ui-slider__handle-label max-limit'></span>`;\n    handleMax.append(yearLabelMax);\n\n    // TRACK FOR RANGE SLIDER\n    // Label for the range track\n    const trackLabel =\n      `<p class='ui-slider__track-label'>\n        <span class='visually-hidden'>Available publication years range from</span>\n        <span>${minRange}</span>\n        <span class='visually-hidden'>to</span>\n        <span>${maxRange}</span>\n      </p>`;\n    $('.publication-range').append(trackLabel);\n\n\n    // MAKING SLIDER HANDLES STAY AT THE POSITION OF PREVIOUSLY SUBMITTED QUERY WHEN PANEL IS REOPENED\n    // Sync multirange slider with filter data from dropdowns.\n    const updateSlider = () => {\n      // Find what dropdown values are selected\n      let $selectMinOption = parseInt($selectMin.find(':selected').text());\n      let $selectMaxOption = parseInt($selectMax.find(':selected').text());\n\n      // Sanitize.\n      if (isNaN($selectMinOption)) {\n        $selectMinOption = minRange;\n      };\n      if (isNaN($selectMaxOption)) {\n        $selectMaxOption = maxRange;\n      };\n\n      // Provide selected values to the multirange slider\n      $publicationRange.slider('values', 0, $selectMinOption);\n      $publicationRange.slider('values', 1, $selectMaxOption);\n\n      // Update floating labels for multirange slider handles\n      $('.min-limit').text($selectMinOption);\n      $('.max-limit').text($selectMaxOption);\n    };\n\n    // Check if Advanced Filter Panel is open.\n    $('.search-filter__advanced').one().click(function() {\n      if ($dropdownPanel.hasClass('js-search_filter__dropdown-open')) {\n        updateSlider();\n      }\n    });\n  });\n}))(jQuery);\n"]}