{"version":3,"sources":["ucsf_quicklinks.js"],"names":["$","document","ready","setTimeout","removeClass","Drupal","behaviors","quicklinks","attach","context","$quicklinks","$triggerToggle","$triggerClose","$quicklinksTriggers","selectorsArr","setAria","value","forEach","trigger","attr","setVisibility","visibility","selector","toggleClass","addClass","click","e","preventDefault","on","activeElement","body","closest","jQuery"],"mappings":";;AAAA;AACA,CAAC,UAAUA,CAAV,EAAa;AACZA,IAAEC,QAAF,EAAYC,KAAZ,CAAkB,YAAY;AAC5BC,eAAW,YAAY;AACrBH,QAAE,MAAF,EAAUI,WAAV,CAAsB,SAAtB,EADqB,CACa;AACnC,KAFD,EAEG,IAFH;AAGD,GAJD;;AAMAC,SAAOC,SAAP,CAAiBC,UAAjB,GAA8B;AAC5BC,YAAQ,gBAAUC,OAAV,EAAmB;AACzB,UAAMC,cAAcV,EAAE,aAAF,EAAiBS,OAAjB,CAApB;AACA,UAAME,iBAAiBX,EAAE,qBAAF,EAAyBS,OAAzB,CAAvB;AACA,UAAMG,gBAAgBZ,EAAE,mBAAF,EAAuBS,OAAvB,CAAtB;AACA,UAAMI,sBAAsB,CAAEF,cAAF,EAAkBC,aAAlB,CAA5B;AACA,UAAME,eAAe,CAAEJ,WAAF,EAAeV,EAAE,gBAAF,EAAoBS,OAApB,CAAf,CAArB;;AAEA;;;;AAIA,UAAMM,UAAU,SAAVA,OAAU,CAAEC,KAAF,EAAa;AAC3BH,4BAAoBI,OAApB,CAA4B;AAAA,iBAAWC,QAAQC,IAAR,CAAa,eAAb,EAA8BH,KAA9B,CAAX;AAAA,SAA5B;AACD,OAFD;;AAIA;;;;;AAKA,UAAMI,gBAAgB,SAAhBA,aAAgB,CAAEC,UAAF,EAAkB;AACtCP,qBAAaG,OAAb,CAAqB,oBAAY;AAC/B,cAAII,eAAe,QAAnB,EAA6B;AAC3BC,qBAASC,WAAT,CAAqB,oBAArB;AACD,eAAIF,eAAe,MAAnB,EAA2B;AAC1BC,qBAASE,QAAT,CAAkB,oBAAlB;AACD;AACD,cAAIH,eAAe,MAAnB,EAA2B;AACzBC,qBAASlB,WAAT,CAAqB,oBAArB;AACD;AACF,SATD;AAUD,OAXD;;AAcA;AACAO,qBAAec,KAAf,CAAqB,UAAUC,CAAV,EAAa;AAChCA,UAAEC,cAAF;AACAP,sBAAc,QAAd;;AAEA;AACA,YAAIT,eAAeQ,IAAf,CAAoB,eAApB,MAAyC,MAA7C,EAAqD;AACnDJ,kBAAQ,OAAR;AACD,SAFD,MAEO;AACLA,kBAAQ,MAAR;AACD;AACF,OAVD;;AAYA;AACAH,oBAAca,KAAd,CAAoB,UAAUC,CAAV,EAAa;AAC/BA,UAAEC,cAAF;AACA;AACAP,sBAAc,MAAd;AACAL,gBAAQ,OAAR;AACD,OALD;;AAQA;AACAf,QAAE,kBAAF,EAAsBS,OAAtB,EAA+BmB,EAA/B,CAAkC,SAAlC,EAA6C,YAAW;AACtDR,sBAAe,MAAf;AACAL,gBAAQ,MAAR;AACD,OAHD;;AAKA;AACAL,kBAAYkB,EAAZ,CAAe,UAAf,EAA2B,YAAW;AACpC;AACAzB,mBAAW,YAAY;AACrB,cAAIF,SAAS4B,aAAT,KAA2B5B,SAAS6B,IAApC,IAA4C7B,SAAS4B,aAAT,KAA2B,IAA3E,EAAiF;AAC/E;AACD;AACD,cAAI5B,SAAS4B,aAAT,CAAuBE,OAAvB,CAA+B,aAA/B,MAAkD,IAAtD,EAA4D;AAC1DX,0BAAc,MAAd;AACAL,oBAAQ,OAAR;AACD;AACF,SARD,EAQG,GARH;AASD,OAXD;AAYD;AA5E2B,GAA9B;AA8ED,CArFD,EAqFGiB,MArFH","file":"ucsf_quicklinks.js","sourcesContent":["/* eslint-disable */\n(function ($) {\n  $(document).ready(function () {\n    setTimeout(function () {\n      $(\"body\").removeClass(\"loading\"); // 'quicklinks-intro' CSS animation breaks if class is removed before animation is finished.\n    }, 5000);\n  });\n\n  Drupal.behaviors.quicklinks = {\n    attach: function (context) {\n      const $quicklinks = $(\".quicklinks\", context);\n      const $triggerToggle = $(\".quicklinks-trigger\", context);\n      const $triggerClose = $(\".quicklinks-close\", context);\n      const $quicklinksTriggers = [ $triggerToggle, $triggerClose];\n      const selectorsArr = [ $quicklinks, $(\".header-region\", context) ];\n\n      /**\n       * Set aria-expanded attribute value on element that triggers the quicklinks visibility\n       * @param {String} value\n       */\n      const setAria = ( value ) => {\n        $quicklinksTriggers.forEach(trigger => trigger.attr(\"aria-expanded\", value));\n      }\n\n      /**\n       * Set visibility of the quicklinks panel\n       * @param {String} visibility\n       * Indicator for how to use classes responsible for quicklinks visibility.\n       */\n      const setVisibility = ( visibility ) => {\n        selectorsArr.forEach(selector => {\n          if (visibility === \"toggle\") {\n            selector.toggleClass(\"js-quicklinks-open\");\n          }if (visibility === \"show\") {\n            selector.addClass(\"js-quicklinks-open\");\n          }\n          if (visibility === \"hide\") {\n            selector.removeClass(\"js-quicklinks-open\");\n          }\n        });\n      };\n\n\n      // Toggle visibility of the quicklinks panel\n      $triggerToggle.click(function (e) {\n        e.preventDefault();\n        setVisibility(\"toggle\" );\n\n        // Set aria attribute.\n        if ($triggerToggle.attr(\"aria-expanded\") === \"true\") {\n          setAria(\"false\");\n        } else {\n          setAria(\"true\");\n        }\n      });\n\n      // Hide quicklinks panel\n      $triggerClose.click(function (e) {\n        e.preventDefault();\n        // Hide quicklinks\n        setVisibility(\"hide\");\n        setAria(\"false\");\n      });\n\n\n      // Show quicklinks panel when user is tabbing through it\n      $(\".quicklinks-menu\", context).on('focusin', function() {\n        setVisibility( \"show\" );\n        setAria(\"true\");\n      });\n\n      // Hide quicklinks panel when focus is out\n      $quicklinks.on('focusout', function() {\n        // Waits and only removes class if newly focused element is outside the quicklinks\n        setTimeout(function () {\n          if (document.activeElement === document.body || document.activeElement === null) {\n            return;\n          }\n          if (document.activeElement.closest(\".quicklinks\") === null) {\n            setVisibility(\"hide\");\n            setAria(\"false\");\n          }\n        }, 150);\n      });\n    },\n  };\n})(jQuery);\n"]}