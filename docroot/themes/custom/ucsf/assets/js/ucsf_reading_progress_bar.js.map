{"version":3,"sources":["ucsf_reading_progress_bar.js"],"names":["$","progressBar","document","querySelector","article","rect","getBoundingClientRect","articleTop","top","documentElement","scrollTop","screenHalfHeight","window","innerHeight","articleHeight","clientHeight","addEventListener","e","scrollY","progress","setAttribute","jQuery"],"mappings":";;AAAA,CAAE,aAAK;;AAEL;AACAA,IAAE,YAAM;AACN;AACA,QAAMC,cAAcC,SAASC,aAAT,CAAuB,eAAvB,CAApB;;AAEA;AACA,QAAMC,UAAUF,SAASC,aAAT,CAAuB,eAAvB,CAAhB;;AAEA;AACA,QAAME,OAAOD,QAAQE,qBAAR,EAAb;AACA,QAAMC,aAAaF,KAAKG,GAAL,GAAWN,SAASO,eAAT,CAAyBC,SAAvD;;AAEA;AACA;AACA;AACA,QAAMC,mBAAmBC,OAAOC,WAAP,GAAqB,CAA9C;AACA,QAAMC,gBAAgBV,QAAQW,YAAR,GAAuBJ,gBAA7C;;AAEAC,WAAOI,gBAAP,CAAwB,QAAxB,EAAkC,UAASC,CAAT,EAAY;AAC5C;AACA,UAAMC,UAAUN,OAAOM,OAAP,GAAiBX,UAAjC;AACA;AACA,UAAIY,WAAWD,UAAUJ,aAAzB;;AAEA;AACA,UAAIK,WAAW,CAAf,EAAkB;AAChBA,mBAAW,CAAX;AACD,OAFD,MAEO,IAAIA,WAAW,CAAf,EAAkB;AACvBA,mBAAW,CAAX;AACD;;AAED;AACAlB,kBAAYmB,YAAZ,CAAyB,OAAzB,EAAkCD,QAAlC;AACD,KAfD;AAiBD,GAlCD;AAmCD,CAtCD,EAsCIE,MAtCJ","file":"ucsf_reading_progress_bar.js","sourcesContent":["(($ => {\n\n  // Wait for the document to be ready.\n  $(() => {\n    // The progress bar which will be updated on scroll.\n    const progressBar = document.querySelector('.progress-bar');\n\n    // The article used to detect scroll position.\n    const article = document.querySelector('.main-content');\n\n    // Get the Y position for where the article sits on the page.\n    const rect = article.getBoundingClientRect();\n    const articleTop = rect.top + document.documentElement.scrollTop;\n\n    // Get the length of the article minus half of the screen height so that\n    // an article will be completed reading once the bottom edge of it is half\n    // way up the screen.\n    const screenHalfHeight = window.innerHeight / 2;\n    const articleHeight = article.clientHeight - screenHalfHeight;\n\n    window.addEventListener('scroll', function(e) {\n      // Get the current scroll position within the article.\n      const scrollY = window.scrollY - articleTop;\n      // Get the average progress ratio of article scrolled through.\n      let progress = scrollY / articleHeight;\n\n      // Ensure that the progress bar never goes lower than zero or higher than 1\n      if (progress > 1) {\n        progress = 1;\n      } else if (progress < 0) {\n        progress = 0;\n      }\n\n      // Set the progress bar percent.\n      progressBar.setAttribute('value', progress);\n    })\n\n  });\n}))(jQuery);\n"]}