{"version":3,"sources":["ucsf_sticky_nav.js"],"names":["$","toolbar","document","querySelector","header","headerNav","headerTop","root","documentElement","setNavHeight","headerNavHeight","offsetHeight","style","setProperty","mql","matchMedia","addListener","mobileToggle","addEventListener","classList","remove","lastScroll","window","currentScroll","pageYOffset","add","jQuery"],"mappings":";;AAAA,CAAE,aAAK;;AAEL;AACAA,IAAE,YAAM;;AAEN;AACA,QAAMC,UAAUC,SAASC,aAAT,CAAuB,yBAAvB,CAAhB;AACA,QAAIF,OAAJ,EAAa;AACX;AACD;;AAED,QAAMG,SAASF,SAASC,aAAT,CAAuB,yBAAvB,CAAf;AACA,QAAME,YAAYH,SAASC,aAAT,CAAuB,gBAAvB,CAAlB;AACA,QAAMG,YAAYJ,SAASC,aAAT,CAAuB,0BAAvB,CAAlB;AACA,QAAMI,OAAOL,SAASM,eAAtB;;AAEA;AACA,QAAMC,eAAe,SAAfA,YAAe,GAAM;AACzB;AACA,UAAMC,kBAAkBL,UAAUM,YAAlC;AACA;AACAJ,WAAKK,KAAL,CAAWC,WAAX,CAAuB,cAAvB,EAAuCH,kBAAkB,IAAzD;AACD,KALD;;AAOA;AACAD;;AAEA;AACA,QAAMK,MAAMC,WAAW,oBAAX,CAAZ;AACAD,QAAIE,WAAJ,CAAgBP,YAAhB;;AAEA;AACA,QAAMQ,eAAef,SAASC,aAAT,CAAuB,eAAvB,CAArB;AACAc,iBAAaC,gBAAb,CAA8B,OAA9B,EAAuC,YAAM;AAC3Cd,aAAOe,SAAP,CAAiBC,MAAjB,CAAwB,WAAxB,EAAqC,oBAArC,EAA2D,mBAA3D;AACD,KAFD;;AAIA;AACA,QAAIC,aAAa,CAAjB;;AAEA;AACA;AACAC,WAAOJ,gBAAP,CAAwB,QAAxB,EAAkC,YAAM;AACtC,UAAMK,gBAAgBD,OAAOE,WAA7B;;AAEA;AACA;AACA,UAAID,gBAAgBjB,UAAUK,YAA9B,EAA4C;AAC1CP,eAAOe,SAAP,CAAiBC,MAAjB,CAAwB,WAAxB,EAAqC,oBAArC,EAA2D,mBAA3D;AACA;AACD;;AAED;AACA;AACA,UAAIG,gBAAgB,GAApB,EAAyB;AACvB;AACA,YAAIA,gBAAgBF,UAApB,EAAgC;AAC9BjB,iBAAOe,SAAP,CAAiBM,GAAjB,CAAqB,mBAArB;AACArB,iBAAOe,SAAP,CAAiBC,MAAjB,CAAwB,oBAAxB;AACF;AACC,SAJD,MAIO;AACLhB,iBAAOe,SAAP,CAAiBC,MAAjB,CAAwB,mBAAxB;AACAhB,iBAAOe,SAAP,CAAiBM,GAAjB,CAAqB,WAArB,EAAkC,oBAAlC;AACD;AACF;;AAEDJ,mBAAaE,aAAb;AACD,KAzBD;AA2BD,GAlED;AAmED,CAtED,EAsEIG,MAtEJ","file":"ucsf_sticky_nav.js","sourcesContent":["(($ => {\n\n  // Wait for the document to be ready.\n  $(() => {\n\n    // Exit if the admin toolbar is present.\n    const toolbar = document.querySelector('#toolbar-administration');\n    if (toolbar) {\n      return;\n    }\n\n    const header = document.querySelector('.combined-header-region')\n    const headerNav = document.querySelector('.header-region')\n    const headerTop = document.querySelector('.universal-header-region');\n    const root = document.documentElement;\n\n    // Calculate the Nav Height and set a CSS variable.\n    const setNavHeight = () => {\n      // Get element height\n      const headerNavHeight = headerNav.offsetHeight;\n      // Set root variable of nav-height\n      root.style.setProperty('--nav-height', headerNavHeight + \"px\")\n    }\n\n    // Set the initial nav height.\n    setNavHeight()\n\n    // Recalculate css variable on screen resize for the Nav height\n    const mql = matchMedia('(min-width: 850px)')\n    mql.addListener(setNavHeight)\n\n    // In Mobile, remove all the fixed classes when toggling the menu.\n    const mobileToggle = document.querySelector('.slicknav_btn');\n    mobileToggle.addEventListener('click', () => {\n      header.classList.remove('fixed-nav', 'fixed-nav--visible', 'fixed-nav--hidden');\n    })\n\n    // Toggle the .is-fixed class on scroll.\n    let lastScroll = 0;\n\n    // calculate weather user is scrolling up or down\n    // to reveal full navbar on up scroll\n    window.addEventListener(\"scroll\", () => {\n      const currentScroll = window.pageYOffset;\n\n      // make nav fixed only when user scrolled past navigation.\n      // In other words, put the navigation back to its normal spot.\n      if (currentScroll < headerTop.offsetHeight) {\n        header.classList.remove('fixed-nav', 'fixed-nav--visible', 'fixed-nav--hidden');\n        return;\n      }\n\n      // Ignore scrolling until 400px below so that it doesn't\n      // mess with the navigation in its normal position.\n      if (currentScroll > 400) {\n        // If scrolling down\n        if (currentScroll > lastScroll) {\n          header.classList.add('fixed-nav--hidden');\n          header.classList.remove('fixed-nav--visible');\n        // If scrolling up\n        } else {\n          header.classList.remove('fixed-nav--hidden');\n          header.classList.add('fixed-nav', 'fixed-nav--visible');\n        }\n      }\n\n      lastScroll = currentScroll;\n    });\n\n  });\n}))(jQuery);\n"]}