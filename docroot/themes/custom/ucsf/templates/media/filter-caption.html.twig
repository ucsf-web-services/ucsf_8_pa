{#
/**
 * @file
 * Theme override for a filter caption.
 *
 * Returns HTML for a captioned image, audio, video or other tag.
 *
 * Available variables
 * - string node: The complete HTML tag whose contents are being captioned.
 * - string tag: The name of the HTML tag whose contents are being captioned.
 * - string caption: The caption text.
 * - string classes: The classes of the captioned HTML tag.
 */
#}
{% set alignment_class = '' %}
{% set node_pieces = node|split(' ') %}

{# @todo Use preprocess instead? #}
{% for node_piece in node_pieces %}
  {% if node_piece starts with 'data-align' %}
    {% set alignment = node_piece|trim('data-align="', 'left') %}
    {% set alignment = alignment|trim('"', 'right') %}
    {% set alignment_class = alignment_class ~  alignment %}
  {% endif %}
{% endfor %}

<figure role="group"  class="{{ alignment_class }} caption caption-{{ tag }} {{ classes }}">
  {{ node }}
  <figcaption class="{{ alignment_class }}__caption">{{ caption }}</figcaption>
</figure>
